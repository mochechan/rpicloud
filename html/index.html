<!doctype html>
<html><head> <script src="js/rpicloud.js"></script> </head><body lang="en">
<h1>RPI cloud demo</h1>
<div id="first" class="box">
  <form><input autocomplete="off" value="Type here..."></input></form>
</div>
</br>

<strong id="test_button" onclick="rpicloudtest('test')">TEST</strong> </br>

<textarea id="chat-content" style="width:400px;height:200px">asdf</textarea><br/>

    <input type="text" id="username" name="" value="" placeholder="Choose username"/>
    <input type="text" id="message" name="" value="" placeholder="Enter chat message"/>
    <input type="button" id="send" name="" value="Send" onclick="sendMessage()"/>
    </br>

<strong id="test01" onclick="test01('test')">TEST01_handler R.event.emit();</strong> </br>
<strong id="test02" onclick="test02('test')">TEST02_handler restful login </strong> </br>
<strong id="test03" onclick="test03('test')">TEST03_handler restful logout </strong> </br>




<script>
/*
var sockjs_url = '/sockjs';
var sockjs = new SockJS(sockjs_url);
$('#first input').focus();

var div  = $('#first div');
var inp  = $('#first input');
var form = $('#first form');

var print = function(m, p) {
		p = (p === undefined) ? '' : JSON.stringify(p);
		div.append($("<code>").text(m + ' ' + p));
		div.append($("<br>"));
		div.scrollTop(div.scrollTop()+10000);
};

sockjs.onopen    = function()  {print('[*] open', sockjs.protocol);};
sockjs.onmessage = function(e) {print('[.] message', e.data);};
sockjs.onclose   = function()  {print('[*] close');};

form.submit(function() {
		print('[ ] sending', inp.val());
		sockjs.send(inp.val());
		inp.val('');
    return false;
});
*/
/////////////////////// use rpicloud
	//R.on('ws_onmessage', function(){ console.log(arguments); });
	//R.ws_send("exec {'command':'pwd'}", function(){ console.log("return by ws_send"); });
	//R.command("exec");
	console.log(R);

	R.event.emit("exec", {"command":"ls"}, function(){
		console.log("exec callback arguments");
		console.log(arguments);
	});

	R.event.on("ws_onmessage", function () {
		console.log("R.event.on ws_onmessage callback");
		console.log(arguments);
	});

var test01 = function (d) {
	R.event.emit("handler", {"handler":"demo1", test:"test01", others:{}, function(){
		console.log("exec callback arguments");
		console.log(arguments);
	}});
}

var test02 = function(arg) {
	//console.log(window.location);
		console.log(arg);
		var x = window.location.protocol + '//' + window.location.hostname + ':3000' + '/';
		console.log(x);
		$.getJSON('user_status', {
		  user: 'value',
		  pass: 'otherValue'
		}, function(data){
			 // Handles the callback when the data returns
			console.log("data");
			console.log(data);
		});
}

var test03 = function(arg) {
	//console.log(window.location);
		console.log(arg);
		var x = window.location.protocol + '//' + window.location.hostname + ':3000' + '/';
		console.log(x);
		$.getJSON('user_logout', { }, function(data){
			 // Handles the callback when the data returns
			console.log("data");
			console.log(data);
		});
}


</script>
</body></html>

